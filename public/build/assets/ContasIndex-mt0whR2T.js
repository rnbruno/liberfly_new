import{r as x,u as y,a as p,_ as f,o as c,c as u,b as t,t as m,d as C,e as _,f as w,S as d,g as M,F as A,h as T,i as g,w as k,j as b,n as I,k as B,l as E,v as N}from"./app-BU69Np-9.js";import"./index-Dfhgw88F.js";function K(){const o=x([]),e=x(""),r=y();return{errors:e,contas:o,getContas:async()=>{try{let a=await p.get("/api/contas");o.value=a.data}catch(a){console.error("An error occurred while fetching contas:",a)}},storeContas:async a=>{e.value="";try{await p.post("/api/contas",a),await r.push({name:"copntas.index"})}catch(s){if(s.response.status===422)for(const n in s.response.data.errors)e.value=s.response.data.errors}},updateContas:async(a,s)=>{e.value="";try{await p.patch(`/api/contas/${a}`,{conta_id:a,inativo:s})}catch{error.response&&error.response.data&&error.response.data.message?Swal.fire({title:"Error",text:error.response.data.message,icon:"error",confirmButtonText:"OK"}):Swal.fire({title:"Error",text:"Unknown error occurred while updating the item.",icon:"error",confirmButtonText:"OK"})}}}}const O={props:{title:String,active_:Boolean,nameItem:String},active_:{type:Boolean,required:!0},methods:{closeModal(){console.log("Closing modal"),this.$emit("update:active_",!1)},confirm(){console.log("Confirm button clicked"),this.$emit("confirm"),this.$emit("update:active_",!1)}},created(){console.log("Modal created with title:",this.title),console.log("Modal active_ status:",this.active_)},watch:{active_(o){console.log("Modal active_ status changed:",o)},title(o){console.log("Modal title changed:",o)}}},$={key:0,class:"modal"},S={class:"modal-dialog"},z={class:"modal-content"},q={class:"modal-header"},D={class:"modal-title"},V={class:"modal-body"},P={class:"modal-footer"};function U(o,e,r,h,i,l){return r.active_?(c(),u("div",$,[t("div",S,[t("div",z,[t("div",q,[t("h5",D,m(r.title),1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>l.closeModal&&l.closeModal(...a))})]),t("div",V,[C(o.$slots,"body1",{},void 0,!0)]),t("div",P,[t("button",{type:"button",class:"btn btn-warning",onClick:e[1]||(e[1]=(...a)=>l.confirm&&l.confirm(...a))},"Confirm edit")])])])])):_("",!0)}const F=f(O,[["render",U],["__scopeId","data-v-d9988807"]]),j={props:{title:String,active_:Boolean,type:String,button_:Array,input_:Array},active_:{type:Boolean,required:!1},methods:{closeModal(){console.log("Closing modal"),this.$emit("update:active_",!1)},confirm(){console.log("Confirm button clicked"),this.$emit("confirm"),this.$emit("update:active_",!1)}},created(){console.log("Modal created with title:",this.title),console.log("Modal active_ status:",this.active_)},watch:{active_(o){console.log("Modal active_ status changed:",o)},title(o){console.log("Modal title changed:",o)}}},L={key:0,class:"modal"},R={class:"modal-dialog"},G={class:"modal-content"},H={class:"modal-header"},J={class:"modal-title"},Q={class:"modal-body"},W={for:"modalInput",class:"form-label"},X={class:"modal-footer"};function Y(o,e,r,h,i,l){return r.active_?(c(),u("div",L,[t("div",R,[t("div",G,[t("div",H,[t("h5",J,m(r.button_[0]),1),t("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>l.closeModal&&l.closeModal(...a))})]),t("div",Q,[t("label",W,m(r.input_[0]),1),e[2]||(e[2]=t("input",{type:"text",class:"form-control",id:"acount",required:""},null,-1))]),t("div",X,[t("button",{type:"button",class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>l.confirm&&l.confirm(...a))},m(r.button_[0]),1)])])])])):_("",!0)}const Z=f(j,[["render",Y],["__scopeId","data-v-6ebe0c1f"]]),tt={name:"ContasIndex",components:{Modal:F,ModalAdd:Z},data(){return{modalTitle:"",showModal:!1,showModalAdd:!1,modalTitleAdd:"",modalType:"",modalName:"",modalInput:Array,modalButton:Array,currentPageTitle:"Título da Página Atual"}},setup(){const{contas:o,getContas:e,updateContas:r}=K();return w(async()=>{await e()}),{contas:o,desactiveconta:async a=>{try{await r(a,1),await e(),d.fire({title:"Desativado",text:"Conta desativada com sucesso.",icon:"success",confirmButtonText:"OK"})}catch(s){s.response&&s.response.data&&s.response.data.message?d.fire({title:"Error",text:s.response.data.message,icon:"error",confirmButtonText:"OK"}):d.fire({title:"Error",text:"Erro desconhecido ao atualizar a conta.",icon:"error",confirmButtonText:"OK"})}},activeconta:async a=>{try{const s=await r(a,0);console.log(s),await e(),d.fire({title:"Ativada",text:"Conta ativada com sucesso.",icon:"success",confirmButtonText:"OK"})}catch(s){s.response&&s.response.data&&s.response.data.message?d.fire({title:"Error",text:s.response.data.message,icon:"error",confirmButtonText:"OK"}):d.fire({title:"Error",text:"Erro desconhecido ao atualizar a conta.",icon:"error",confirmButtonText:"OK"})}},atualizarCount:async a=>{await e()}}},methods:{openModal(o,e){console.log("Modal opened with name:",o),console.log(this),this.modalTitle="Edit Acount",this.modalName=o,this.modalInput=e,this.showModal=!0},addCount(){this.modalTitleAdd="Add Acount",this.modalType="addCount",this.showModalAdd=!0,this.modalButton=["Add Acount"],this.modalInput=["Info Acount Name "]},async handleConfirm(){console.log("Confirmed with input:",this.modalInput,this.modalName);try{const o=await axios.patch(`/api/contas/update-name/${this.modalInput}`,{conta:this.modalName,conta_id:this.modalInput});console.log("Item updated successfully:",o.data),d.fire({title:"Count edit",text:"Conta editada com sucesso.",icon:"success",confirmButtonText:"OK"}),await this.atualizarCount()}catch(o){o.response&&o.response.data&&o.response.data.message?d.fire({title:"Error",text:o.response.data.message,icon:"error",confirmButtonText:"OK"}):d.fire({title:"Error",text:"Erro desconhecido ao atualizar a conta.",icon:"error",confirmButtonText:"OK"})}},async handleConfirmAcount(){console.log("Confirmed with input:",this.modalInput,this.modalName);try{const o=await axios.patch(`/api/contas/store/${this.modalInput}`,{conta:this.modalName,conta_id:this.modalInput});console.log("Item updated successfully:",o.data),d.fire({title:"Count edit",text:"Conta editada com sucesso.",icon:"success",confirmButtonText:"OK"}),await this.atualizarCount()}catch(o){o.response&&o.response.data&&o.response.data.message?d.fire({title:"Error",text:o.response.data.message,icon:"error",confirmButtonText:"OK"}):d.fire({title:"Error",text:"Erro desconhecido ao atualizar a conta.",icon:"error",confirmButtonText:"OK"})}}}},et={class:"min-h-screen bg-gray-100"},ot={class:"bg-white shadow"},at={class:"max-w-7xl mx-auto py-2 px-4 sm:px-6 lg:px-4"},st={class:"text-xl text-gray-800 leading-tight"},nt={class:"py-4"},it={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},lt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},rt={class:"row"},dt={class:"col-4 offset-9"},ct={class:"px-6 pb-4 bg-white border-b border-gray-200"},ut={class:"table-striped","table-striped":""},mt=["onClick"],ht=["onClick"],pt=["onClick"],ft={class:"mb-3"},_t={class:"bg-white shadow"},vt={class:"max-w-7xl mx-auto py-2 px-4 sm:px-6 lg:px-4"},xt={class:"text-xl text-gray-800 leading-tight"};function gt(o,e,r,h,i,l){const a=b("Modal"),s=b("ModalAdd");return c(),u("div",et,[e[9]||(e[9]=M('<nav class="bg-white border-b border-gray-100" data-v-0ac05b08><div class="max-w-7xl mx-auto m-4 px-4 sm:px-6 lg:px-8" data-v-0ac05b08><div class="flex h-16 d-flex align-items-center mb-md-2 me-md-auto text-dark" data-v-0ac05b08><div class="" data-v-0ac05b08><a href="/" data-v-0ac05b08><i class="fa fa-address-card fa-2x item-icon" aria-hidden="true" data-v-0ac05b08></i></a></div><div class="flex ml-2" data-v-0ac05b08><div data-v-0ac05b08><div class="text-xl text-black-500" data-v-0ac05b08>Contas</div><div class="text-sm text-gray-500" data-v-0ac05b08></div></div></div></div></div></nav>',1)),t("header",ot,[t("div",at,[t("h2",st,m(i.currentPageTitle),1)])]),t("main",null,[t("div",nt,[t("div",it,[t("div",lt,[t("div",rt,[t("div",dt,[t("button",{onClick:e[0]||(e[0]=n=>l.addCount("addCount")),class:"btn btn-primary m-4",title:"Adicione Count"},"Adicionar Count")])]),t("div",ct,[t("table",ut,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Contas"),t("th",null,"Ações")])],-1)),t("tbody",null,[(c(!0),u(A,null,T(h.contas,n=>(c(),u("tr",{key:n.conta_id},[t("td",null,m(n.conta_id),1),t("td",{class:I({"item-excluido":n.inativo===1})},m(n.conta),3),t("td",null,[n.inativo==1?(c(),u("button",{key:0,onClick:v=>h.activeconta(n.conta_id),class:"btn btn-success",title:"Ativar usuário"},e[4]||(e[4]=[t("i",{class:"fa fa-check","aria-hidden":"true"},null,-1)]),8,mt)):(c(),u("button",{key:1,onClick:v=>h.desactiveconta(n.conta_id),class:"btn btn-danger",title:"Desativar usuário"},e[5]||(e[5]=[t("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)]),8,ht)),n.inativo==0?(c(),u("button",{key:2,onClick:B(v=>l.openModal(n.conta,n.conta_id),["prevent"]),class:"btn btn-secondary ml-2",title:"Editar usuário"},e[6]||(e[6]=[t("i",{class:"fa fa-pencil-square","aria-hidden":"true"},null,-1)]),8,pt)):_("",!0)])]))),128))])]),g(a,{title:i.modalTitle,nameItem:i.modalName,active_:i.showModal,"onUpdate:active_":e[2]||(e[2]=n=>i.showModal=n),onConfirm:l.handleConfirm},{body1:k(()=>[t("div",ft,[e[8]||(e[8]=t("label",{for:"modalInput",class:"form-label"},"Name count",-1)),E(t("input",{type:"text",class:"form-control",id:"modalInput","onUpdate:modelValue":e[1]||(e[1]=n=>i.modalName=n),required:""},null,512),[[N,i.modalName]])])]),_:1},8,["title","nameItem","active_","onConfirm"]),g(s,{title:i.modalTitleAdd,type:i.modalType,button_:i.modalButton,input_:i.modalInput,active_:i.showModalAdd,"onUpdate:active_":e[3]||(e[3]=n=>i.showModalAdd=n),onConfirm:l.handleConfirmAcount},null,8,["title","type","button_","input_","active_","onConfirm"])])])])])]),t("header",_t,[t("div",vt,[t("h2",xt,m(i.currentPageTitle),1)])])])}const Ct=f(tt,[["render",gt],["__scopeId","data-v-0ac05b08"]]);export{Ct as default};
